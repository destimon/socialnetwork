<% layout('/layouts/layout') -%>

<head>
  <link rel="stylesheet" href="/style/messages.css">
</head>
<body>
		<div class="row">
			<div class="col-sm-offset-2 col-sm-8" id="app">
			<h2>Сообщения</h2>
			<input id="username" value="<%=mydata.login%>" hidden></input>
				<div class="panel panel-default" id="messagepanel">
		    	<msg-item v-bind:msglist="msglist"></msg-item>
				</div>
			    
		    <form>
		      <div class="form-group">
			      <input id="m" class="form-control" autocomplete="off"/>
		      </div>
			    <hr>
			    <input type="button" v-on:click="sendMessage" value="Отправить" class="btn btn-success"/>
		    </form>
			</div>
	  </div>

  <script type="text/x-template" id="message_box">
  	<div class="row">
	    	<ul v-for="msg in msglist">
  				<div class="col-sm-10">
  					<blockquote>
	    				<b><a :href="'/usr/' + msg.user">{{ msg.user }}</a></b> {{ msg.text }}
  					</blockquote>
    			</div>
    			<div class="col-sm-2">
    				<small>{{ msg.date }}</small>
    			</div>
	    	</ul>
  	</div>
  </script>
  
  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/messages.js"></script>
</body