<% layout('/layouts/layout') -%>
 
<html>
<head>
  <% if(user.login !== undefined) { %> 
    <title><%=user.login%></title>
  <% } else { %>
    <title>Pivnushka!</title>
  <% } %>
  <link rel="stylesheet" href="/style/account.css">
</head>
<body>

  <!-- Information -->
  <div class="container">
    <div class="row">
      <div class="col-sm-4">
        <p class="h3">Информация</p>
          <p class="h4">
            <div class="row">
              <div class="col-sm-5">
                <p>ID:</p> 
                <p>Логин:</p> 
                <p>Дата рождения:</p> 
                <p>Пол:</p> 
              </div>

              <div class="col-sm-3">
                <p><%= user._id %></p>                
                <p><%= user.login %></p>

                <% if(user.dob) { %> 
                <p><%= user.dob %></p>
                <% } else { %>
                  <p>N/A</p>
                <% } %>

                <% if(user.gender) { %>
                <p><%= user.gender %></p>       
                <% } else { %>
                  <p>N/A</p>
                <% } %>
              </div>
            </div>
          </p>

          <hr>

          <div class="row">
            <div class="col-sm-12">
              <% if(user.about !== undefined) { %> 
                <p class="h3">О себе</p>
                <p class="h4">
                    <%=user.about%>
                </p>
              <% } %>
            </div>
          </div>
        </div>  
      

      <div class="col-sm-4">
        <% if(user.name) { %> 
          <% if(user.surname) { %> 
            <p class="h1"><%= user.name %> <%= user.surname %></p>
          <% } %>
        <% } %>
        <image src="/usr/<%=user.login%>/avatar" id="avatar" class="image img-circle"></image>
      </div>

      <% if (mydata) { %> 
        <% if (mydata !== user) { %> 
          <div class="row">
            <div class="col-sm-4 col-sm-offset-4">
              <form method="getuser" data-remote="true">
                <button type="submit" class="btn">Добавить</button>
                <button type="button" class="btn btn disabled">Написать</button>
              </form>
            </div>
          </div>
        <% } %>
      <% } %>
    </div>
  </div>
  
  <hr>

  <!-- Blog -->

  <div class="container">
    <% if (mydata) { %>    
      <% if (mydata == user) { %> 
        <div clas="row">
          <div class="col-sm-4">
            <p class="h1">Что нового?</p>
              <form id="create_post_form">
                <div class="form-group">
                  <input class="form-control" name="text" id="text" type="text">
                  <hr>
                  <input type="button" v-on:click="postFeed" class="btn btn-success" value="Отправить"></input>
                </div>

                <p>{{message}}</p>
              </form>  
          </div>
        </div>
      <% } %>
    <% } %>  

        <div class="row">
          <div class="col-sm-offset-4">
            <h1>Опубликовано</h1>      
              <div id="blog">
                <div class="container">
                  <div class="col-sm-4">
                    <post-list v-bind:posts="posts"></post-list>
                  </div>
                </div>
              </div>
          </div>
        </div>
  </div>

  <!-- LIST OF POSTS -->

  <script type="text/x-template" id="postList_template">
      <table class="table">
        <thead>
          <tr>
            <th>author</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="p in posts">                       
            <td>{{ p.text }}</td>
          </tr>
        </tbody>
      </table>
  </script>

  <script src='/js/vue.js'></script>
  <script src='/js/index.js'></script>
</body>
</html>
